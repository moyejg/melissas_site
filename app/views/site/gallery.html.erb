<% if mobile? %>
  <div class="row">
    <div class="col-lg-4 offset-lg-4">
      <div id="carouselMobile" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner carousel-style">
          <div class="carousel-item active">
              <img src="/assets/melissalogo.jpg" class="d-block w-100 img-fluid" alt="Vida Magic Logo">
          </div>
          <% @pieces.each do |piece| %>
            <div class="carousel-item">  
                <%= image_tag (piece.images.joins(:blob).order('active_storage_blobs.filename ASC').first if piece.images.attached?), class:"d-block w-100 img-fluid" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% else %>
<br>
  <div id="carouselComputer" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">        
      <div class="carousel-item slow-carousel-item active"> 
        <div class="row home-row d-flex flex-wrap align-items-center row-border">
          <% 4.times do %>
           <span style="display: none;"><%= @piece = Piece.find(Piece.pluck(:id).sample) %></span>
            <div class="col-sm-3">
              <%= image_tag (@piece.images.joins(:blob).order('RANDOM()').first.variant(resize_to_limit: [200, 200]) if @piece.images.attached?), class:"img-thumbnail mx-auto d-block img-fluid", style:" box-shadow: 10px 10px 5px grey;" %>
            </div>
          <% end %>
        </div>         
      </div>     
      <div class="carousel-item slow-carousel-item"> 
      <div class="row home-row d-flex flex-wrap align-items-center row-border">
          <% 4.times do %>
            <span style="display: none;"><%= @piece = Piece.find(Piece.pluck(:id).sample) %></span>
            <div class="col-sm-3">
              <%= image_tag (@piece.images.joins(:blob).order('RANDOM()').first.variant(resize_to_limit: [200, 200]) if @piece.images.attached?), class:"img-thumbnail mx-auto d-block img-fluid", style:" box-shadow: 10px 10px 5px grey;" %>
            </div>
          <% end %>
        </div>              
      </div>      
    </div>
  </div>
<% end %>


<div class="row">
  <div class="col-lg-10 offset-lg-1 my-auto">
    <h1>Vida Gallery</h1>
  </div>
</div>
<br>

<% @pieces.each_slice(3) do |pieces| %>
  <div class="row">
    <% pieces.each do |piece| %>
      <div class="col-lg-4">
        <br>
        <%= link_to piece_modal_path(piece_id: piece.id), remote: true do %>        
          <%= image_tag (piece.images.joins(:blob).order('active_storage_blobs.filename ASC').first if piece.images.attached?), class:"img-thumbnail mx-auto d-block gallery-img-size", style:" box-shadow: 10px 10px 5px grey;" %>  
        <% end %>      
          <p class="gallery-p"><%= piece.name %></p>
          <p class="gallery-p"><%= piece.description %></p>              
      </div>
    <% end %>
  </div>
<% end %>


